## Enhanced Caching Headers - Phase 3 Performance Optimization
## Aggressive caching strategies for near-instant return visits

# Global security headers
/*
  X-Content-Type-Options: nosniff
  X-Frame-Options: SAMEORIGIN
  X-XSS-Protection: 1; mode=block
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: accelerometer=(), camera=(self), geolocation=(), gyroscope=(), magnetometer=(), microphone=(self), payment=(), usb=(), fullscreen=(self), picture-in-picture=()
  Content-Security-Policy: default-src 'self'; script-src 'self' 'sha256-gMLZ0yAXUbBh+Ad62A3i6z3YZER7fXtdbzLzBwxqAts=' https://us.i.posthog.com https://us-assets.i.posthog.com https://vercel.live http://localhost:* ws://localhost:*; connect-src 'self' https://contributor.info https://*.netlify.app https://avatars.githubusercontent.com https://github.com https://egcxzonpmmcirmgqdrla.supabase.co https://us.i.posthog.com https://us-assets.i.posthog.com https://api.github.com https://raw.githubusercontent.com https://contributor-info-webhooks.fly.dev https://contributor-info-social-cards.fly.dev https://vercel.live https://ingesteer.services-prod.nsvcs.net https://inn.gs https://gh-datapipe.fly.dev wss://egcxzonpmmcirmgqdrla.supabase.co ws://localhost:* http://localhost:*; img-src 'self' data: blob: https://contributor.info https://avatars.githubusercontent.com https://github.com https://raw.githubusercontent.com https://images.unsplash.com https://egcxzonpmmcirmgqdrla.supabase.co https://contributor-info-social-cards.fly.dev; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; frame-src 'self' https://vercel.live https://app.netlify.com; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'self'; worker-src 'self' blob:;

# HTML pages - Network first with must-revalidate
/index.html
  Cache-Control: no-cache, no-store, must-revalidate
  Pragma: no-cache
  Expires: 0
  Content-Type: text/html; charset=utf-8
  
/docs/*
  Cache-Control: no-cache, no-store, must-revalidate
  Pragma: no-cache
  Expires: 0
  Content-Type: text/html; charset=utf-8

# Service Workers - Never cache (critical for updates)
/sw.js
  Cache-Control: no-cache, no-store, must-revalidate
  Service-Worker-Allowed: /
  Content-Type: text/javascript; charset=utf-8

/sw-enhanced.js
  Cache-Control: no-cache, no-store, must-revalidate
  Service-Worker-Allowed: /
  Content-Type: text/javascript; charset=utf-8

# JavaScript modules - Aggressive caching for production builds
/*.js
  Content-Type: text/javascript; charset=utf-8
  Cache-Control: public, max-age=604800, stale-while-revalidate=86400
  X-Content-Type-Options: nosniff

/*.mjs
  Content-Type: text/javascript; charset=utf-8
  Cache-Control: public, max-age=604800, stale-while-revalidate=86400
  X-Content-Type-Options: nosniff

# Vendor chunks - Immutable 1 year cache
/js/vendor-*.js
  Content-Type: text/javascript; charset=utf-8
  Cache-Control: public, max-age=31536000, immutable
  X-Content-Type-Options: nosniff

# App chunks - Long cache with revalidation
/js/*.js
  Content-Type: text/javascript; charset=utf-8
  Cache-Control: public, max-age=31536000, immutable
  X-Content-Type-Options: nosniff

# Vite build assets - Immutable (hashed filenames)
/assets/*
  Cache-Control: public, max-age=31536000, immutable

/assets/*.js
  Content-Type: text/javascript; charset=utf-8
  Cache-Control: public, max-age=31536000, immutable
  X-Content-Type-Options: nosniff

/assets/*.css
  Content-Type: text/css; charset=utf-8
  Cache-Control: public, max-age=31536000, immutable

# Image caching headers for performance optimization
/assets/*.jpg
  Content-Type: image/jpeg
  Cache-Control: public, max-age=31536000, immutable
  Accept-CH: DPR, Width, Viewport-Width
  Vary: Accept, DPR, Width

/assets/*.jpeg
  Content-Type: image/jpeg
  Cache-Control: public, max-age=31536000, immutable
  Accept-CH: DPR, Width, Viewport-Width
  Vary: Accept, DPR, Width

/assets/*.png
  Content-Type: image/png
  Cache-Control: public, max-age=31536000, immutable
  Accept-CH: DPR, Width, Viewport-Width
  Vary: Accept, DPR, Width

/assets/*.gif
  Content-Type: image/gif
  Cache-Control: public, max-age=31536000, immutable

/assets/*.webp
  Content-Type: image/webp
  Cache-Control: public, max-age=31536000, immutable
  Accept-CH: DPR, Width, Viewport-Width
  Vary: Accept, DPR, Width

/assets/*.avif
  Content-Type: image/avif
  Cache-Control: public, max-age=31536000, immutable
  Accept-CH: DPR, Width, Viewport-Width
  Vary: Accept, DPR, Width

/assets/*.svg
  Content-Type: image/svg+xml
  Cache-Control: public, max-age=31536000, immutable

/assets/*.ico
  Content-Type: image/x-icon
  Cache-Control: public, max-age=31536000, immutable

# Generic image paths - Aggressive caching with stale-while-revalidate
/images/*
  Cache-Control: public, max-age=2592000, stale-while-revalidate=86400
  Accept-CH: DPR, Width, Viewport-Width
  Vary: Accept, DPR, Width

# Icons - Very long cache
/icons/*
  Cache-Control: public, max-age=2592000, stale-while-revalidate=86400
  Accept-CH: DPR, Width, Viewport-Width

# Fonts - Immutable cache for web fonts
/*.woff2
  Cache-Control: public, max-age=31536000, immutable
  Content-Type: font/woff2
  
/*.woff
  Cache-Control: public, max-age=31536000, immutable
  Content-Type: font/woff

/*.ttf
  Cache-Control: public, max-age=31536000, immutable
  Content-Type: font/ttf

/*.eot
  Cache-Control: public, max-age=31536000, immutable
  Content-Type: application/vnd.ms-fontobject

# JSON data - Short cache with revalidation
/*.json
  Content-Type: application/json; charset=utf-8
  Cache-Control: public, max-age=3600, stale-while-revalidate=86400

/manifest.json
  Content-Type: application/manifest+json; charset=utf-8
  Cache-Control: public, max-age=3600, stale-while-revalidate=86400

# Sitemaps - Daily cache
/sitemap.xml
  Content-Type: application/xml; charset=utf-8
  Cache-Control: public, max-age=86400, stale-while-revalidate=86400

/sitemap-*.xml
  Content-Type: application/xml; charset=utf-8
  Cache-Control: public, max-age=86400, stale-while-revalidate=86400

# Offline fallback page
/offline.html
  Content-Type: text/html; charset=utf-8
  Cache-Control: public, max-age=3600, must-revalidate

# API responses - No caching (handled by service worker)
/api/*
  Cache-Control: no-cache, must-revalidate
  Content-Type: application/json; charset=utf-8

# Netlify Functions
/.netlify/functions/*
  Cache-Control: no-cache, must-revalidate
  Content-Type: application/json; charset=utf-8