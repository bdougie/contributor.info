import { Meta } from '@storybook/blocks';

<Meta title="Documentation/Patterns/Layout" />

# Layout Patterns

Comprehensive guide for creating consistent, responsive layouts that adapt to different screen sizes and content needs.

## Overview

Layout patterns provide the structural foundation for our application. They ensure consistent spacing, alignment, and responsive behavior across all pages and components.

## Core Layout Components

### Container

The Container component provides consistent max-width and padding across pages.

```tsx
function PageLayout() {
  return (
    <Container>
      <Header />
      <main className="min-h-screen">
        {/* Page content */}
      </main>
      <Footer />
    </Container>
  );
}

// Variants
<Container size="sm">  {/* max-w-2xl */}
<Container size="md">  {/* max-w-4xl */}
<Container size="lg">  {/* max-w-6xl */}
<Container size="xl">  {/* max-w-7xl */}
<Container size="full"> {/* w-full */}
```

### Grid System

Responsive grid layouts using CSS Grid and Flexbox.

```tsx
// Basic Grid
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  <Card>Item 1</Card>
  <Card>Item 2</Card>
  <Card>Item 3</Card>
</div>

// Auto-fit Grid
<div className="grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-4">
  {items.map(item => (
    <Card key={item.id}>{item.content}</Card>
  ))}
</div>

// Asymmetric Grid
<div className="grid grid-cols-12 gap-6">
  <div className="col-span-12 lg:col-span-8">
    <MainContent />
  </div>
  <div className="col-span-12 lg:col-span-4">
    <Sidebar />
  </div>
</div>
```

### Flex Layouts

Flexible box layouts for dynamic content arrangement.

```tsx
// Horizontal Stack
<div className="flex items-center gap-4">
  <Avatar />
  <div className="flex-1">
    <h3>User Name</h3>
    <p>User bio</p>
  </div>
  <Button>Follow</Button>
</div>

// Vertical Stack
<div className="flex flex-col gap-4">
  <Header />
  <Content className="flex-1" />
  <Footer />
</div>

// Wrapping Items
<div className="flex flex-wrap gap-2">
  {tags.map(tag => (
    <Badge key={tag}>{tag}</Badge>
  ))}
</div>
```

## Common Layout Patterns

### Dashboard Layout

```tsx
function DashboardLayout({ children }) {
  return (
    <div className="min-h-screen bg-gray-50">
      {/* Top Navigation */}
      <header className="bg-white border-b sticky top-0 z-50">
        <div className="px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between h-16">
            <div className="flex items-center">
              <Logo />
              <nav className="hidden md:ml-6 md:flex md:space-x-8">
                <NavLink href="/dashboard">Dashboard</NavLink>
                <NavLink href="/repositories">Repositories</NavLink>
                <NavLink href="/contributors">Contributors</NavLink>
              </nav>
            </div>
            <div className="flex items-center gap-4">
              <NotificationBell />
              <UserMenu />
            </div>
          </div>
        </div>
      </header>

      {/* Main Content Area */}
      <div className="flex h-[calc(100vh-4rem)]">
        {/* Sidebar */}
        <aside className="hidden lg:block w-64 bg-white border-r">
          <nav className="p-4 space-y-1">
            <SidebarLink href="/dashboard" icon={HomeIcon}>
              Home
            </SidebarLink>
            <SidebarLink href="/analytics" icon={ChartIcon}>
              Analytics
            </SidebarLink>
            <SidebarLink href="/settings" icon={SettingsIcon}>
              Settings
            </SidebarLink>
          </nav>
        </aside>

        {/* Content */}
        <main className="flex-1 overflow-y-auto">
          <div className="p-4 sm:p-6 lg:p-8">
            {children}
          </div>
        </main>
      </div>
    </div>
  );
}
```

### Card Grid Layout

```tsx
function CardGridLayout({ items }) {
  return (
    <div className="container mx-auto px-4 py-8">
      {/* Header */}
      <div className="mb-8">
        <h1 className="text-3xl font-bold mb-2">Contributors</h1>
        <p className="text-gray-600">
          Showing {items.length} active contributors
        </p>
      </div>

      {/* Filters */}
      <div className="flex flex-wrap gap-4 mb-6">
        <Select placeholder="Sort by">
          <SelectItem value="activity">Most Active</SelectItem>
          <SelectItem value="recent">Most Recent</SelectItem>
          <SelectItem value="name">Name</SelectItem>
        </Select>
        <Input placeholder="Search..." className="max-w-xs" />
      </div>

      {/* Grid */}
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        {items.map(item => (
          <Card key={item.id} className="hover:shadow-lg transition-shadow">
            <CardHeader>
              <Avatar src={item.avatar} />
              <CardTitle>{item.name}</CardTitle>
            </CardHeader>
            <CardContent>
              <p>{item.description}</p>
            </CardContent>
            <CardFooter>
              <Button variant="outline" className="w-full">
                View Profile
              </Button>
            </CardFooter>
          </Card>
        ))}
      </div>

      {/* Pagination */}
      <div className="mt-8 flex justify-center">
        <Pagination />
      </div>
    </div>
  );
}
```

### Split View Layout

```tsx
function SplitViewLayout() {
  return (
    <div className="flex h-screen">
      {/* Left Panel - List */}
      <div className="w-1/3 min-w-[300px] border-r bg-gray-50 overflow-y-auto">
        <div className="sticky top-0 bg-white border-b p-4 z-10">
          <Input placeholder="Search items..." />
        </div>
        <div className="divide-y">
          {items.map(item => (
            <div
              key={item.id}
              className="p-4 hover:bg-white cursor-pointer"
              onClick={() => setSelected(item)}
            >
              <h3 className="font-medium">{item.title}</h3>
              <p className="text-sm text-gray-500">{item.subtitle}</p>
            </div>
          ))}
        </div>
      </div>

      {/* Right Panel - Detail */}
      <div className="flex-1 overflow-y-auto">
        {selected ? (
          <div className="p-8">
            <h1 className="text-2xl font-bold mb-4">{selected.title}</h1>
            <div className="prose max-w-none">
              {selected.content}
            </div>
          </div>
        ) : (
          <div className="flex items-center justify-center h-full text-gray-500">
            Select an item to view details
          </div>
        )}
      </div>
    </div>
  );
}
```

### Hero Section

```tsx
function HeroSection() {
  return (
    <section className="relative overflow-hidden bg-gradient-to-br from-blue-600 to-purple-700">
      <div className="container mx-auto px-4 py-24 sm:px-6 lg:px-8">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          {/* Text Content */}
          <div className="text-white">
            <h1 className="text-4xl sm:text-5xl lg:text-6xl font-bold mb-6">
              Track Your Open Source Impact
            </h1>
            <p className="text-xl mb-8 text-blue-100">
              Visualize contributions, analyze trends, and celebrate your community's achievements.
            </p>
            <div className="flex flex-wrap gap-4">
              <Button size="lg" variant="secondary">
                Get Started
              </Button>
              <Button size="lg" variant="outline" className="text-white border-white hover:bg-white hover:text-blue-600">
                Learn More
              </Button>
            </div>
          </div>

          {/* Visual Element */}
          <div className="relative">
            <img
              src="/hero-illustration.svg"
              alt="Dashboard preview"
              className="rounded-lg shadow-2xl"
            />
            {/* Floating Stats */}
            <div className="absolute -top-4 -right-4 bg-white rounded-lg shadow-lg p-4">
              <div className="text-2xl font-bold">1.2K+</div>
              <div className="text-sm text-gray-500">Active Contributors</div>
            </div>
          </div>
        </div>
      </div>

      {/* Background Pattern */}
      <div className="absolute inset-0 bg-grid-white/10 bg-[size:20px_20px]" />
    </section>
  );
}
```

## Responsive Design

### Breakpoint System

```tsx
// Tailwind breakpoints
// sm: 640px  - Small devices (landscape phones)
// md: 768px  - Medium devices (tablets)
// lg: 1024px - Large devices (desktops)
// xl: 1280px - Extra large devices (large desktops)
// 2xl: 1536px - 2X large devices (larger desktops)

// Responsive utilities
<div className="
  text-sm sm:text-base lg:text-lg
  px-4 sm:px-6 lg:px-8
  grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3
">
  {/* Content */}
</div>
```

### Mobile-First Approach

```tsx
function ResponsiveComponent() {
  return (
    <div className="
      /* Mobile (default) */
      flex flex-col gap-4
      
      /* Tablet (md) */
      md:flex-row md:gap-6
      
      /* Desktop (lg) */
      lg:gap-8
    ">
      <div className="
        /* Mobile: full width */
        w-full
        
        /* Tablet: half width */
        md:w-1/2
        
        /* Desktop: one third */
        lg:w-1/3
      ">
        {/* Sidebar content */}
      </div>
      
      <div className="
        /* Mobile: full width */
        w-full
        
        /* Tablet: half width */
        md:w-1/2
        
        /* Desktop: two thirds */
        lg:w-2/3
      ">
        {/* Main content */}
      </div>
    </div>
  );
}
```

### Responsive Navigation

```tsx
function ResponsiveNav() {
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  return (
    <nav className="bg-white shadow">
      <div className="container mx-auto px-4">
        <div className="flex justify-between h-16">
          {/* Logo */}
          <div className="flex items-center">
            <Logo />
          </div>

          {/* Desktop Navigation */}
          <div className="hidden md:flex items-center space-x-8">
            <NavLink href="/home">Home</NavLink>
            <NavLink href="/about">About</NavLink>
            <NavLink href="/contact">Contact</NavLink>
          </div>

          {/* Mobile Menu Button */}
          <div className="md:hidden flex items-center">
            <button
              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
              className="p-2"
              aria-label="Toggle menu"
            >
              <MenuIcon className="h-6 w-6" />
            </button>
          </div>
        </div>
      </div>

      {/* Mobile Menu */}
      {mobileMenuOpen && (
        <div className="md:hidden border-t">
          <div className="px-2 pt-2 pb-3 space-y-1">
            <MobileNavLink href="/home">Home</MobileNavLink>
            <MobileNavLink href="/about">About</MobileNavLink>
            <MobileNavLink href="/contact">Contact</MobileNavLink>
          </div>
        </div>
      )}
    </nav>
  );
}
```

## Spacing System

### Consistent Spacing Scale

```tsx
// Spacing scale (in rem/px)
// 0: 0
// 1: 0.25rem (4px)
// 2: 0.5rem (8px)
// 3: 0.75rem (12px)
// 4: 1rem (16px)
// 5: 1.25rem (20px)
// 6: 1.5rem (24px)
// 8: 2rem (32px)
// 10: 2.5rem (40px)
// 12: 3rem (48px)
// 16: 4rem (64px)
// 20: 5rem (80px)
// 24: 6rem (96px)

// Usage examples
<div className="p-4">        {/* padding: 16px */}
<div className="mt-8">       {/* margin-top: 32px */}
<div className="space-y-4">  {/* gap between children: 16px */}
<div className="gap-6">      {/* gap in flex/grid: 24px */}
```

### Section Spacing

```tsx
function PageWithSections() {
  return (
    <div>
      {/* Hero section with large padding */}
      <section className="py-20 lg:py-32">
        <Container>
          <HeroContent />
        </Container>
      </section>

      {/* Content sections with consistent spacing */}
      <section className="py-16 lg:py-24">
        <Container>
          <Features />
        </Container>
      </section>

      <section className="py-16 lg:py-24 bg-gray-50">
        <Container>
          <Testimonials />
        </Container>
      </section>

      {/* CTA section */}
      <section className="py-16 lg:py-24">
        <Container>
          <CallToAction />
        </Container>
      </section>
    </div>
  );
}
```

## Accessibility Considerations

### Semantic HTML

```tsx
// Use semantic elements for better structure
<header>
  <nav aria-label="Main navigation">
    {/* Navigation items */}
  </nav>
</header>

<main>
  <article>
    <h1>Page Title</h1>
    <section aria-labelledby="section-title">
      <h2 id="section-title">Section Title</h2>
      {/* Section content */}
    </section>
  </article>

  <aside aria-label="Related content">
    {/* Sidebar content */}
  </aside>
</main>

<footer>
  {/* Footer content */}
</footer>
```

### Focus Management

```tsx
// Skip links for keyboard navigation
<a href="#main-content" className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded">
  Skip to main content
</a>

// Focus trap in modals
<Dialog>
  <DialogContent>
    {/* Content with trapped focus */}
  </DialogContent>
</Dialog>

// Visible focus indicators
<button className="focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
  Click me
</button>
```

## Best Practices

### Do's ✅

1. **Use consistent spacing throughout the app**
2. **Design mobile-first, enhance for desktop**
3. **Test layouts at various screen sizes**
4. **Use semantic HTML elements**
5. **Maintain visual hierarchy**
6. **Provide adequate touch targets on mobile**
7. **Use CSS Grid for 2D layouts**
8. **Keep important content above the fold**

### Don'ts ❌

1. **Don't use fixed widths for responsive layouts**
2. **Don't hide essential content on mobile**
3. **Don't use too many breakpoints**
4. **Don't forget about landscape orientation**
5. **Don't mix spacing scales**
6. **Don't create overly complex grids**
7. **Don't ignore accessibility**
8. **Don't use inline styles for layout**

## Performance Optimization

### Layout Shift Prevention

```tsx
// Reserve space for dynamic content
<div className="min-h-[400px]">
  {loading ? <Skeleton /> : <Content />}
</div>

// Use aspect ratio for images
<div className="aspect-w-16 aspect-h-9">
  <img src={imageSrc} alt={imageAlt} loading="lazy" />
</div>

// Fixed heights for known content
<header className="h-16">
  {/* Header content */}
</header>
```

### Lazy Loading

```tsx
// Lazy load below-the-fold content
const LazySection = lazy(() => import('./HeavySection'));

function Page() {
  return (
    <>
      <AboveTheFold />
      <Suspense fallback={<SectionSkeleton />}>
        <LazySection />
      </Suspense>
    </>
  );
}
```

## Related Documentation

- [Container Component](./Container)
- [Grid System](./Grid)
- [Responsive Utilities](./Responsive)
- [Spacing System](./Spacing)
- [Breakpoints](./Breakpoints)
- [Accessibility Guidelines](./Accessibility)