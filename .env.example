# ===========================================
# ENVIRONMENT CONFIGURATION
# ===========================================
# 
# Quick Start:
# 1. Copy this file to .env.local
# 2. Choose your environment:
#    - For LOCAL development: npm run env:local
#    - For PRODUCTION: npm run env:production
#
# The environment switcher will configure these for you automatically!
# ===========================================

# ===========================================
# LOCAL DEVELOPMENT CONFIGURATION
# ===========================================
# These values are automatically set when you run: npm run env:local
# 
# LOCAL Supabase (Docker required)
# VITE_SUPABASE_URL=http://localhost:54321
# VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0

# ===========================================
# PRODUCTION CONFIGURATION
# ===========================================
# These values are automatically set when you run: npm run env:production
# Replace with your actual production values
#
# PRODUCTION Supabase
# VITE_SUPABASE_URL=https://egcxzonpmmcirmgqdrla.supabase.co
# VITE_SUPABASE_ANON_KEY=your-production-anon-key

# ===========================================
# CLIENT-SIDE VARIABLES (Safe for browser)
# ===========================================
# These are prefixed with VITE_ and exposed to the browser
# Only include PUBLIC information here

# Supabase (public configuration) - Set by env switcher
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key

# Environment indicator (auto-set by env switcher)
VITE_ENV=local

# GitHub (public read-only token)
# Create at: https://github.com/settings/tokens/new
# Required scopes for seed data generation:
#   - public_repo (read public repositories)
#   - read:user (read user profile info)
# For local seed generation, use a Personal Access Token (Classic)
VITE_GITHUB_TOKEN=your-github-personal-access-token

# Inngest (app identification only - NOT the event key!)
VITE_INNGEST_APP_ID=contributor-info

# OpenAI (optional – still required for GPT-based features)
# VITE_OPENAI_API_KEY=your-openai-api-key

# PostHog LLM Analytics (optional - for AI feature observability)
# Tracks token usage, costs, latency, and errors for OpenAI calls
# VITE_POSTHOG_API_KEY=your-posthog-api-key
# VITE_POSTHOG_HOST=https://us.i.posthog.com

# PostHog Analytics (optional)
VITE_POSTHOG_KEY=your-posthog-project-api-key
VITE_POSTHOG_HOST=https://app.posthog.com

# PostHog Management Scripts (for cohort/flag creation scripts)
# POSTHOG_PROJECT_ID=your-project-id
# POSTHOG_PERSONAL_API_KEY=phx_your-personal-api-key
# POSTHOG_INTERNAL_TEAM_COHORT_ID=cohort-id-from-script-output

# Sentry Error Tracking (optional)
VITE_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Dub.co URL Shortener (public key)
VITE_DUB_CO_KEY=your-dub-co-public-key
VITE_DUB_DOMAIN_DEV=your-dev-domain
VITE_DUB_DOMAIN_PROD=your-prod-domain

# ===========================================
# SERVER-SIDE VARIABLES (Private - never exposed to browser)
# ===========================================
# These are NOT prefixed with VITE_ and only accessible server-side
# Include SENSITIVE information here

# Supabase (admin/service keys)
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
SUPABASE_TOKEN=your-supabase-admin-token
SUPABASE_MCP_TOKEN=your-supabase-mcp-token

# Inngest (server secrets - NEVER expose to browser!)
INNGEST_EVENT_KEY=your-inngest-event-key
INNGEST_SIGNING_KEY=your-inngest-signing-key
INNGEST_SERVE_HOST=your-inngest-host
INNGEST_SERVE_PATH=/api/inngest

# GitHub (server tokens with higher permissions)
# For seed data generation, this should be the same token as VITE_GITHUB_TOKEN
# Required scopes: public_repo, read:user
GITHUB_TOKEN=your-server-github-token

# ===========================================
# SEED DATA CONFIGURATION
# ===========================================
# Configuration for local seed data generation

# Seed data timeframe (days to collect)
SEED_DATA_DAYS=14

# Example repositories to use for seed data
SEED_REPOSITORIES=continuedev/continue,vitejs/vite,facebook/react,vercel/next.js,supabase/supabase

# OpenAI (optional – still required for GPT-based features)
# OPENAI_API_KEY=your-openai-server-key

# PostHog LLM Analytics (server-side for Supabase Edge Functions)
# Required for LLM observability in edge functions
# POSTHOG_API_KEY=your-posthog-api-key
# POSTHOG_HOST=https://us.i.posthog.com

# Dub.co (private API key)
DUB_API_KEY=your-dub-api-private-key

# GitHub App Configuration (server-side for webhooks)
# You can use either CONTRIBUTOR_APP_* or GITHUB_APP_* variables
# CONTRIBUTOR_APP_* takes precedence if both are set
CONTRIBUTOR_APP_ID=your-github-app-id
CONTRIBUTOR_APP_KEY="-----BEGIN RSA PRIVATE KEY-----\nyour-private-key-here\n-----END RSA PRIVATE KEY-----"
# Alternative naming (legacy support)
GITHUB_APP_ID=your-github-app-id
GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nyour-private-key-here\n-----END RSA PRIVATE KEY-----"
GITHUB_APP_WEBHOOK_SECRET=your-webhook-secret

# Other configuration
BASE_URL=http://localhost:4173
NODE_ENV=development

# Hybrid Progressive Capture Rollout Configuration
HYBRID_ROLLOUT_PERCENTAGE=0
HYBRID_EMERGENCY_STOP=false
HYBRID_ROLLOUT_STRATEGY=percentage
HYBRID_AUTO_ROLLBACK=true
HYBRID_MAX_ERROR_RATE=5.0

RESEND_API_KEY=re-123

# ===========================================
# SECURITY NOTES
# ===========================================
# 
# ❌ NEVER DO THIS:
# VITE_INNGEST_EVENT_KEY=secret  # Exposes server secret to browser!
# VITE_SUPABASE_SERVICE_ROLE_KEY=secret  # Exposes admin access to browser!
# 
# ✅ CORRECT APPROACH:
# - Public keys: VITE_* prefix (exposed to browser)
# - Private keys: No VITE_ prefix (server-only)
# - Use the env.ts helper for safe access
# 
# The env.ts file will:
# - Prevent server keys from being accessed in browser
# - Show security warnings if attempted
# - Use proper access patterns for each context
#
# READ THIS: The VITE_ prefix exposes variables to the browser bundle!
# Anyone can inspect your website and see VITE_* variables.
# Only put PUBLIC information in VITE_* variables.

FLY_API_TOKEN=your-fly-api-token

# GitHub Datpipe Configuration
# This key is used for both API authentication and webhook HMAC verification
GH_DATPIPE_KEY=your-github-datpipe-key
GH_DATPIPE_API_URL=https://your-datapipe-api.fly.dev