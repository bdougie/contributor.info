## 2024-05-22 - Missing Authorization in Edge Functions
**Vulnerability:** The `slack-oauth-initiate` edge function accepted a `workspace_id` in the body but failed to verify if the requestor was authenticated or had access to that workspace. It used the service role key to perform database operations, effectively bypassing Row Level Security (RLS).
**Learning:** Edge functions often run with elevated privileges (Service Role) to perform specific tasks. If they don't explicitly validate the user's identity and permissions using the `Authorization` header, they become a bypass for the application's security model.
**Prevention:** Always extract the `Authorization` header in edge functions. Use `supabase.auth.getUser(token)` to identify the user. Before performing actions on behalf of a user or workspace, explicitly query membership/permissions tables to authorize the request.
