# Phase 3 Priority Components for Refactoring

## Quick Wins (Sub-Phase 3.1) - 1 Day Each

### 1. Static Style Replacements
These components use only static styles that can be immediately replaced with Tailwind:

```tsx
// src/components/features/repository/repo-view.tsx
// Before:
<nav style={{ background: 'transparent', border: 'none' }}>
// After:
<nav className="bg-transparent border-none">

// src/components/features/contributor/contributor-hover-card.tsx  
// Before:
<div style={{ pointerEvents: 'auto' }}>
// After:
<div className="pointer-events-auto">

// src/components/ui/svg-sprite-loader.tsx
// Before:
style={{ position: 'absolute', width: 0, height: 0, overflow: 'hidden' }}
// After:
className="absolute w-0 h-0 overflow-hidden"
```

**Files to refactor (15 files, ~30 instances):**
- `breadcrumbs.tsx` - Remove transparent background
- `repo-view.tsx` - Navigation styles
- `docs-sidebar.tsx` - Background color
- `contributor-hover-card.tsx` - Pointer events
- `pr-hover-card.tsx` - Pointer events
- `file-hover-card.tsx` - Pointer events

## Medium Complexity (Sub-Phase 3.2) - 2-3 Days Each

### 2. Progress & Loading Indicators
**Pattern**: Dynamic width percentages

```tsx
// src/components/ui/progress.tsx
// Current:
style={{ transform: `translateX(-${100 - (value || 0)}%)` }}

// Option 1: CSS Variable
style={{ '--progress': `${value}%` }}
className="transform -translate-x-[calc(100%-var(--progress))]"

// Option 2: Tailwind Arbitrary Value (if safelisted)
className={`transform -translate-x-[${100 - value}%]`}
```

**Files (5 components):**
- `progress.tsx` - Main progress bar
- `data-state-indicator.tsx` - Data completeness
- `confidence-breakdown-tooltip.tsx` - Score bars
- `loading-fallbacks.tsx` - Loading progress
- `confidence-analytics-dashboard.tsx` - Percentage bars

### 3. Animation Delays
**Pattern**: Index-based delays for staggered animations

```tsx
// src/components/ui/github-search-input.tsx
// Current:
style={{ animationDelay: `${index * 100}ms` }}

// Refactor:
style={{ '--delay': `${index * 100}ms` }}
className="animate-pulse [animation-delay:var(--delay)]"
```

**Files (3 components):**
- `github-search-input.tsx` - Search results animation
- `not-found.tsx` - 404 page animations
- `WidgetGallerySkeleton.tsx` - Loading skeletons

### 4. Dynamic Heights for Charts
**Pattern**: Responsive chart dimensions

```tsx
// src/components/features/workspace/TrendChart.tsx
// Current:
<div style={{ height }}>

// Refactor:
style={{ '--chart-height': height }}
className="h-[var(--chart-height)]"
```

**Files (6 components):**
- `TrendChart.tsx`
- `ActivityChart.tsx`
- `RisingStarsChart.tsx`
- `skeleton-chart.tsx`
- `AnalyticsSkeletons.tsx`
- `preview.tsx` (social cards)

## Complex Refactoring (Sub-Phase 3.3) - 1 Week

### 5. Language Colors System
**Pattern**: Dynamic colors from GitHub language data

```tsx
// Create a dedicated language color system
// src/lib/language-colors.ts
export const getLanguageColorClass = (language: string): string => {
  // Map to predefined Tailwind classes or CSS variables
  const colorMap: Record<string, string> = {
    'JavaScript': 'bg-[#f1e05a]',
    'TypeScript': 'bg-[#2b7489]',
    'Python': 'bg-[#3572A5]',
    // ... etc
  };
  return colorMap[language] || 'bg-gray-500';
};

// Usage:
<div className={getLanguageColorClass(language)} />
```

**Files (8 components):**
- `distribution-charts.tsx` - 12 instances
- `distribution-treemap-enhanced.tsx` - 9 instances
- `language-legend.tsx`
- `organization-avatar.tsx`
- `user-view.tsx`
- `org-view.tsx`
- `workspace-page.tsx`
- `not-found.tsx`

### 6. Virtual Scrolling
**Pattern**: Dynamic positioning for performance

```tsx
// src/components/ui/virtualized-list.tsx
// This is critical for performance - may need to keep inline
// or implement with CSS variables carefully

style={{ 
  '--item-height': `${itemHeight}px`,
  '--offset': `${startOffset}px` 
}}
className="absolute top-[var(--offset)] h-[var(--item-height)]"
```

**Files (1 component, 6 instances):**
- `virtualized-list.tsx` - Critical performance component

## Blocked by Libraries (Sub-Phase 3.4) - Research Required

### 7. React Spring Animations
**Cannot refactor without library changes**

```tsx
// src/components/features/activity/contributions.tsx
<animated.g style={nodeStyle}> // Spring interpolated values
```

**Impact**: 16 instances in contributions graph
**Solution**: Investigate nonce-based CSP or alternative animation library

### 8. Chart Libraries (Recharts, Nivo, UPlot)
**Generated by libraries at runtime**

**Files**:
- `UPlotChart.tsx`
- `DonutChart.tsx`
- `chart.tsx`

**Solution**: These may require keeping 'unsafe-inline' or implementing CSP nonces

## Refactoring Priority Matrix

| Priority | Effort | Impact | Components | Timeline |
|----------|--------|--------|------------|----------|
| P0 | Low | Quick Win | Static styles (30 instances) | 2 days |
| P1 | Medium | High | Progress/Loading (20 instances) | 3 days |
| P2 | Medium | Medium | Animations (10 instances) | 2 days |
| P3 | Medium | Medium | Chart Heights (15 instances) | 2 days |
| P4 | High | High | Language Colors (40 instances) | 5 days |
| P5 | High | Critical | Virtual Scrolling (6 instances) | 3 days |
| P6 | Blocked | N/A | Library Styles (32 instances) | TBD |

## Implementation Order

### Week 1: Quick Wins
- Day 1-2: P0 - Static styles
- Day 3-4: P1 - Progress indicators
- Day 5: Testing & validation

### Week 2: Core Components  
- Day 1-2: P2 - Animation delays
- Day 3-4: P3 - Chart dimensions
- Day 5: Testing & validation

### Week 3: Complex Systems
- Day 1-3: P4 - Language color system
- Day 4-5: P5 - Virtual scrolling

### Week 4: Validation & Documentation
- Performance testing
- CSP validation
- Developer documentation
- Rollback planning

## Success Criteria
- [ ] 70% of inline styles removed
- [ ] No visual regressions
- [ ] Performance metrics maintained
- [ ] CSP headers validate (excluding library styles)
- [ ] Developer documentation complete